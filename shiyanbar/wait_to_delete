## 【实验目的】
1)通过使用工具完成暴力破解，理解导致能够进行暴力破解的原因。掌握防御暴力破解的加固方式。
## 【实验原理】
DVWA (Dam Vulnerable Web Application)DVWA是用PHP+Mysql编写的一套用于常规WEB漏洞教学和检测的WEB脆弱性测试程序。包含了SQL注入、XSS、盲注等常见的一些安全漏洞。这节实验主要使用WebCruiser工具对网站的登录页进行暴力破解。
## 【实验环境】
![](/UploadImage/2015/12/17/20_55994)
目标机：`http://192.168.1.3:8080/dvwa/login.php`
工具：C:\实验工具集\01_WEB安全\04_webshell上传技术\
## 【实验步骤】
### 一、尝试登录
1.1使用浏览器打开`http://192.168.1.3:8080/dvwa/login.php`，输入账号：admin密码：password
进行登录。如图1所示

1.2登录后页面选择Brute Froce.。如图2所示

1.3尝试输入任意的Username和Password,登录失败。如图3所示

### 二、使用工具进行暴力破解
2.1在【C:\实验工具集\01_WEB安全\04_webshell上传技术\第6节 dvwa之暴力破解】目录下打开WebCruiser，将`http://192.168.1.3:8080/dvwa/login.php` 输入到URL处，回车进入登录页面，输入admin/password正常登录。如图4所示

2.2在页面中选择Brute Force暴力破解实验。如图5所示

2.3随意输入Username和Password，点击Login，登录失败。如图6所示

2.4选择工具上面的Resend选项，点击Request选项后可以看到产生的URL。点击最上面的ULR。可以看到刚刚输入的username和password。如图7所示

2.5点击Bruter选项。看到刚刚选择的URL，同时可以选择自己的用户名和字典库。如图8所示

2.6选择好用户和字典文件之后，点击Go。就开始了暴力破解进程。结束之后会显示破解出的用户名和密码。如图9所示

2.7将得到的用户名和密码登录页面。登录成功。如图10所示

### 三、漏洞分析与修复建议
3.1 打开Brute Froce页面，在页面的最下方点击View Source。。查看源代码。如图11所示

3.2查看源代码。如图12所示

3.3可以看出此处仅对输入的用户和密码进行了一些过滤，转换等措施，而没有对登录的次数进行限制。从而导致了可以被暴力破解。根据形成该漏洞的成因，可以对登录次数进行限制，登录失败多少次之后限制其登录。可以添加验证码机制来防止。代码如图13所示

通过设置在数据库中添加了一个列表，last_failure,就是最后登录失败时间，每次登录失败，需要等待15秒钟。才能继续登录，来限制无限制的暴力破解。
